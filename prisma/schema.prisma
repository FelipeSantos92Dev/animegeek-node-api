// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  // previewFeatures = ["referentialIntegrity"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
  // shadowDatabaseUrl    = env("SHADOW_DATABASE_URL")
  // referentialIntegrity = "prisma"
}

model User {
  id         String   @id @default(uuid())
  email      String   @unique
  password   String
  role       String
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  profile       Profile?
  refresh_token RefreshToken?
  @@map("users")
}

model RefreshToken {
  id         String @id @default(uuid())
  user_id    String @unique
  expires_in Int

  user User @relation(fields: [user_id], references: [id], onDelete: Cascade)
  @@map("refresh_token")
}

model Profile {
  id         String   @id @default(uuid())
  user_id    String   @unique
  name       String?  @default("")
  cellphone  String?  @default("")
  avatar     String?  @default("")
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  user User @relation(fields: [user_id], references: [id], onDelete: Cascade)
  @@map("profiles")
}

model Category {
  id          String   @id @default(uuid())
  name        String   @unique
  description String
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt

  @@map("categories")
}

model Cart {
  id         String   @id @default(uuid())
  code       String   @unique @default(uuid())
  price      Int
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@map("carts")
}

model Transaction {
  id                  String   @id @default(uuid())
  code                String   @unique @default(uuid())
  cartCode            String
  status              String
  paymentType         String?
  installments        Int?
  total               Int?
  transactionId       Int?
  processorResponse   Json?
  customerEmail       String?
  customerName        String?
  customerMobile      String?
  customerDocument    String?
  billingAddress      String?
  billingNumber       String?
  billingNeighborhood String?
  billingCity         String?
  billingState        String?
  billingZipCode      String?
  created_at          DateTime @default(now())
  updated_at          DateTime @updatedAt

  @@map("transactions")
}
